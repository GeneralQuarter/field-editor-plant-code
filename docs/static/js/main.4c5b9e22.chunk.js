(this["webpackJsonpfield-editor-plant-code"]=this["webpackJsonpfield-editor-plant-code"]||[]).push([[0],{30:function(e,t,n){},34:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n(3),s=n(10),c=(n(27),n(28),n(29),n(30),n(6)),i=n.n(c),o=n(7),u=n(16),p=n(17),d=n(22),f=n(21),l=n(2),b=n(5),j=n(4),O=function(e){Object(d.a)(n,e);var t=Object(f.a)(n);function n(e){var r;return Object(u.a)(this,n),(r=t.call(this,e)).onConfigure=Object(o.a)(i.a.mark((function e(){var t;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.props.sdk.app.getCurrentState();case 2:return t=e.sent,e.abrupt("return",{parameters:r.state.parameters,targetState:t});case 4:case"end":return e.stop()}}),e)}))),r.state={parameters:{}},e.sdk.app.onConfigure((function(){return r.onConfigure()})),r}return Object(p.a)(n,[{key:"componentDidMount",value:function(){var e=Object(o.a)(i.a.mark((function e(){var t,n=this;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.props.sdk.app.getParameters();case 2:t=e.sent,this.setState(t?{parameters:t}:this.state,(function(){n.props.sdk.app.setReady()}));case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){return Object(j.jsx)(l.j,{className:Object(b.a)({margin:"80px"}),children:Object(j.jsxs)(l.a,{children:[Object(j.jsx)(l.b,{children:"Field Editor: Plant Code"}),Object(j.jsx)(l.f,{children:"No additional configuration required :)"})]})})}}]),n}(r.Component),h=n(20),m=function(e){var t=e.sdk,n=t.entry.fields.commonInfo,a=t.field,s=t.entry.getSys();return Object(r.useEffect)((function(){return n.onValueChanged(function(){var e=Object(o.a)(i.a.mark((function e(n){var r,c,o,u,p,d;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n){e.next=3;break}return s.publishedAt||a.setValue(""),e.abrupt("return");case 3:if(!a.getValue()){e.next=5;break}return e.abrupt("return");case 5:return e.next=7,t.space.getEntry(n.sys.id);case 7:return r=e.sent,c="".concat(r.fields.genus.fr.slice(0,2)).concat(r.fields.species.fr.slice(0,2),"-").toUpperCase(),o={content_type:s.contentType.sys.id,"fields.code[match]":c,"sys.id[ne]":s.id,order:"-fields.code",limit:1},e.next=12,t.space.getEntries(o);case 12:if(0!==(u=e.sent).total){e.next=16;break}return a.setValue(c+1),e.abrupt("return");case 16:p=u.items[0],d=parseInt(p.fields.code.fr.split("-")[1]),a.setValue(c+(d+1));case 19:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())})),Object(j.jsx)(h.a,{baseSdk:t,field:a,isInitiallyDisabled:!0})};Object(s.init)((function(e){var t=document.getElementById("root");[{location:s.locations.LOCATION_APP_CONFIG,component:Object(j.jsx)(O,{sdk:e})},{location:s.locations.LOCATION_ENTRY_FIELD,component:Object(j.jsx)(m,{sdk:e})}].forEach((function(n){e.location.is(s.locations.LOCATION_ENTRY_FIELD)&&e.window.startAutoResizer(),e.location.is(n.location)&&Object(a.render)(n.component,t)}))}))}},[[34,1,2]]]);
//# sourceMappingURL=main.4c5b9e22.chunk.js.map